@{
    ViewBag.Title = "标签编辑";
}
@model OrderingSystem.Admin.Models.BusinessEvaluationVM
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="ibox-content">
        <div class="ibox-title">
            <h5>
                菜品编辑 <small> 添加、修改</small>
            </h5>
        </div>
    </div>
    <div class="col-sm-12">

        <div class="panel-body">
            <form class="form-horizontal">
                <div id="divImgIdHid"></div>
                <input type="hidden" class="form-control" name="id" id="id" value="@Model.BusinessEvaluationModel.BusinessEvaluationId">  
                <input type="hidden" class="form-control" name="businessInfoId" id="businessInfoId" value="@Model.BusinessEvaluationModel.BusinessInfoId">
                   
                <div class="form-group">
                    <label class="col-sm-2 control-label">测评综合得分</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" placeholder="输入商家测评" maxlength="100" name="grade" id="grade" value="@Model.BusinessEvaluationModel.Grade">
                    </div><label class="red-line">*</label>
                </div>

                <div class="hr-line-dashed"></div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">环境测评得分</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" placeholder="环境测评得分" maxlength="100" name="environment" id="environment" value="@Model.BusinessEvaluationModel.Environment">
                    </div><label class="red-line">*</label>
                </div>

                <div class="hr-line-dashed"></div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">服务测评得分</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" placeholder="服务测评得分" maxlength="100" name="service" id="service" value="@Model.BusinessEvaluationModel.Service">
                    </div><label class="red-line">*</label>
                </div>

                <div class="hr-line-dashed"></div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">设施测评得分</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" placeholder="设施测评得分" maxlength="100" name="facilities" id="facilities" value="@Model.BusinessEvaluationModel.Facilities">
                    </div><label class="red-line">*</label>
                </div>

                <div class="hr-line-dashed"></div>
                <div class="form-group">
                    <div class="col-sm-4 col-sm-offset-2">
                        <button id="btnSave" class="btn btn-primary" type="button">保存内容</button>
                        <a class="btn btn-white" href="javascript:history.go(-1);">取消</a>
                    </div>
                </div>

            </form>
        </div>

    </div>
</div>
@section script{
    <script type="text/javascript">
        $(function () {
       
            $("#btnSave").click(function () {

                var id = $('#id'),
                   grade = $('#grade'),
                   environment = $('#environment'),
                   service = $('#service'),
                   facilities = $('#facilities'),
                businessInfoId = $('#businessInfoId');
                //数据校验
                if ($.trim(grade.val()) == '' || grade.val() == null) {
                    grade.focus();
                    return false;
                }
                if ($.trim(environment.val()) == '' || environment.val() == null) {
                    environment.focus();
                    return false;
                }
                if ($.trim(service.val()) == '' || service.val() == null) {
                    service.focus();
                    return false;
                }
                if ($.trim(facilities.val()) == '' || facilities.val() == null) {
                    facilities.focus();
                    return false;
                }
                var dataArr = {
                    BusinessEvaluationId: id.val(),
                    Grade: grade.val(),
                    Environment: environment.val(),
                    Service: service.val(),
                    Facilities: facilities.val(),
                    BusinessInfoId: businessInfoId.val()
                };
                window.parent.showModal();
                //提交
                $.post('/BusinessEvaluation/Edit', dataArr, function (data) {
                    if (data.Status == 200) {
                        swal("提示", "操作成功");
                        setTimeout(function () {
                            window.location.href = '/BusinessEvaluation/List';
                        }, 1500);
                    }
                    if (data.Status == 202) {
                        swal("提示", "操作失败");
                    }
                    if (data.Status == 203) {
                        swal("提示", "数据重复");
                    }
                }).complete(function () { window.parent.hideModal(); });
            })
        });
    </script>
}

